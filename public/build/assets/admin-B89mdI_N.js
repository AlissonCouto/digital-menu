jQuery(function(t){t(".account .edit-account a").on("click",function(a){a.preventDefault(),t(".account .items").toggleClass("open")});function c(){t.ajax({url:"/admin/balcao/notificacao",type:"GET",dataType:"json",success:function(a){console.log("Retorno: ",a),a.success==!0&&(t("#order-lanes #inanalysis #listing").prepend(a.data),console.log("Pedidos encontrados: ",a))},error:function(a,e,n){console.error("Erro ao buscar pedidos:",e,n)}})}c(),setInterval(function(){c()},1e4),f(),p(),g(),t(".phoneMask").each(function(){var a=t(this);a.val()&&a.trigger("blur")}),t("body").on("click",".orders .update-status",function(a){a.preventDefault();let e=t(this).attr("href"),n=t(this).data("status");t.ajax({url:e,dataType:"json",type:"get",data:{status:n},beforeSend:function(){t("#order-lanes").html(`
                    <div class="spinner-container">
                            <div class="spinner"></div>
                        </div>`)},success:function(i){i.success==!0&&i.data.length>0&&t("#order-lanes").html(i.data)},error:function(i){console.log("ERRO: ",i)}})}),t("#validity_type").on("change",function(a){t(this).val()=="deadline"?(t("#fields-usage-limit").find("input").val(""),t("#fields-usage-limit").addClass("d-none"),t("#fields-deadline").removeClass("d-none")):(t("#fields-deadline").find("input").val(""),t("#fields-deadline").addClass("d-none"),t("#fields-usage-limit").removeClass("d-none"))}),t("#gender").on("change",function(a){t(this).val()=="o"?t("#gender-text").removeClass("d-none"):(t("#gender-text input").val(""),t("#gender-text").addClass("d-none"))}),t("#search-entity").on("submit",function(a){a.preventDefault(),o(t(this).attr("action"),1)}),t("#categories").on("change",function(a){var e=t(this).attr("data-page");let n=t("#search-entity").attr("action");o(n,e)}),t(document).on("click",".pagination .prev, .pagination .next",function(a){if(a.preventDefault(),!t(this).hasClass("-inactive")){var e=t(this).attr("data-page");let n=t("#search-entity").attr("action");o(n,e)}});function o(a,e=1){var n=t("#search").val(),i=a,s=t("#categories").val();t.ajaxSetup({headers:{"X-CSRF-TOKEN":t('meta[name="csrf-token"]').attr("content")}}),t.ajax({beforeSend:function(){t(".body-table table tbody").html(`
                    <tr>
                        <td colspan="4">
                            <div class="spinner"></div>
                        </td>
                    </tr>`)},type:"post",dataType:"json",url:i,data:{search:n,category_id:s,page:e},success:function(l){setTimeout(function(){t(".pagination .from").text(l.from),t(".pagination .to").text(l.to),t(".pagination .total").text(l.total),l.currentPage==1?t(".pagination .prev").addClass("-inactive"):t(".pagination .prev").removeClass("-inactive").attr("data-page",l.currentPage-1),l.currentPage==l.lastPage?t(".pagination .next").addClass("-inactive"):t(".pagination .next").removeClass("-inactive").attr("data-page",l.currentPage+1),t("#entity-quantity").html(`(${l.total})`),t("#search-entity").data("entity")!="orders"?t(".body-table table tbody").html(l.html):t(".body-table .orders-list .row").html(l.html)},100)}})}t("body").on("click",".body-table .actions .delete a, .link-delete",function(a){a.preventDefault();let e=t(this).prop("href");t("#modal-delete .buttons .delete").attr("data-url",e),d()}),t("body").on("click","#modal-delete .buttons .delete",function(a){window.location.href=t(this).data("url")}),t("body").on("click","#modal-delete .buttons .cancel, #modal-delete .btn-close",function(a){t("#modal-delete .buttons .delete").attr("data-url",""),d()});function d(){t("#modal-delete").toggle()}t("#new-address, #modal-address button.btn-close").on("click",function(a){r()}),t(".overlayer").on("click",function(a){a.target==this&&r()});function r(){t("#modal-address").toggle()}var u=t(".popup");u.length>0&&setTimeout(function(){u.fadeOut(400,function(){t(this).remove()})},3e3),t(".tabs-resume-orders .nav-link").on("click",function(a){let e="";switch(t(a.target).attr("id")){case"historic-tab":e="Histórico de pedidos";break;case"client-tab":e="Dados pessoais do cliente";break;case"address-tab":e="Dados de endereço";break}t(".modal-address .modal-title").html(e)});function f(){t(".phoneMask").on("input",function(a){this.value=this.value.replace(/\D/g,"")}),t(".phoneMask").on("blur",function(a){var e=t(this).val().replace(/\D/g,""),n="";e.length===11?n="("+e.substring(0,2)+") "+e.substring(2,3)+" "+e.substring(3,7)+"-"+e.substring(7,11):e.length===10&&(n="("+e.substring(0,2)+") 9 "+e.substring(2,6)+"-"+e.substring(6,10)),t(this).val(n)})}function g(){t(".cpfMask").on("input",function(a){var e=t(this).val().replace(/[ \-\(\)]/g,"");e.length>11&&t(this).val(t(this).val().substring(0,11))}),t(".cpfMask").on("blur",function(a){var e=t(this).val().replace(/[ \-\(\)]/g,""),n="";e.split("").forEach((i,s)=>{switch(s){case 2:case 5:n+=i+".";break;case 8:n+=i+"-";break;default:n+=i}}),t(this).val(n)})}function p(){t(".priceMask").on("input",function(a){let e=t(this).val();e=e.replace(/\D/g,""),e=(e/100).toFixed(2)+"",e=e.replace(".",","),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,"."),t(this).val(e)})}t("#category_id").on("change",function(a){t(this).val()==1?(t("#price").closest(".col-12").css("display","none"),t("#file-field").closest(".col-12").css("display","none"),t("#fields-for-pizzas").removeClass("d-none")):(t("#price").closest(".col-12").css("display","block"),t("#file-field").closest(".col-12").css("display","block"),t("#fields-for-pizzas").addClass("d-none"))})});
